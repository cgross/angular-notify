angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(a,b,c,d,e){var f=10,g=15,h=1e4,i="angular-notify.html",j="center",k=document.body,l=0,m=[],n=[],o=function(o){"object"!=typeof o&&(o={message:o}),o.duration=o.duration?o.duration:h,o.templateUrl=o.templateUrl?o.templateUrl:i,o.container=o.container?o.container:k,o.classes=o.classes?o.classes:"",o.onClose=angular.isFunction(o.onClose)?o.onClose:void 0,o.onOpen=angular.isFunction(o.onOpen)?o.onOpen:void 0,o.onClick=angular.isFunction(o.onClick)?o.onClick:void 0;var p=o.scope?o.scope.$new():e.$new();p.$position=o.position?o.position:j,p.$message=o.message,p.$classes=o.classes,p.$messageTemplate=o.messageTemplate,b.get(o.templateUrl,{cache:d}).then(function(b){function d(){for(var a=0,b=f,c=m.length-1;c>=0;c--){var d=10,e=m[c],h=e[0].offsetHeight,i=b+h+d;e.attr("data-closing")?i+=20:b+=h+g,e.css("top",i+"px").css("margin-top","-"+(h+d)+"px").css("visibility","visible"),a++}}var e=c(b.data)(p);if(e.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(a){("opacity"===a.propertyName||0===a.currentTarget.style.opacity||a.originalEvent&&"opacity"===a.originalEvent.propertyName)&&(e.remove(),m.splice(m.indexOf(e),1),n.splice(n.indexOf(p),1),d())}),o.messageTemplate){for(var h,i=0;i<e.children().length;i++)if(angular.element(e.children()[i]).hasClass("cg-notify-message-template")){h=angular.element(e.children()[i]);break}if(!h)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+o.templateUrl+".");h.append(c(o.messageTemplate)(p))}if(angular.element(o.container).append(e),m.push(e),"center"===p.$position&&p.$applyAsync(function(){p.$centerMargin="-"+e[0].offsetWidth/2+"px"}),p.$close=function(){e.css("opacity",0).attr("data-closing","true"),d(),angular.isDefined(o.onClose)&&o.onClose(p.$message)},p.$click=function(){angular.isDefined(o.onClick)&&(o.onClick(p.$message),o.onClickClose&&p.$close())},p.$applyAsync(function(){d()}),o.duration>0&&a(function(){p.$close()},o.duration,!1),angular.isDefined(o.onOpen)&&o.onOpen(p.$message),l>0)for(var j=n.length+1-l,i=0;j>i;i++)n[i].$close();n.push(p)})["catch"](function(a){throw new Error("Template specified for cgNotify ("+o.templateUrl+") could not be loaded. "+a)});var q={};return q.close=function(){p.$close&&p.$close()},Object.defineProperty(q,"message",{get:function(){return p.$message},set:function(a){p.$message=a}}),q};return o.config=function(a){f=angular.isUndefined(a.startTop)?f:a.startTop,g=angular.isUndefined(a.verticalSpacing)?g:a.verticalSpacing,h=angular.isUndefined(a.duration)?h:a.duration,i=a.templateUrl?a.templateUrl:i,j=angular.isUndefined(a.position)?j:a.position,k=a.container?a.container:k,l=a.maximumOpen?a.maximumOpen:l},o.closeAll=function(){for(var a=m.length-1;a>=0;a--){var b=m[a];b.css("opacity",0)}},o}]),angular.module("cgNotify").run(["$templateCache",function(a){"use strict";a.put("angular-notify.html","<div class=\"cg-notify-message\" ng-class=\"[$classes, \n    $position === 'center' ? 'cg-notify-message-center' : '',\n    $position === 'left' ? 'cg-notify-message-left' : '',\n    $position === 'right' ? 'cg-notify-message-right' : '']\"\n    ng-style=\"{'margin-left': $centerMargin}\">\n\n    <div ng-show=\"!$messageTemplate\">\n        {{$message}}\n    </div>\n\n"+'    <div ng-show="$messageTemplate" class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')}]);