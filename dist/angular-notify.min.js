angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(a,b,c,d,e){var f=10,g=15,h=1e4,i="angular-notify.html",j="center",k=document.body,l=0,m=500,n=[],o=[],p=function(p){"object"!=typeof p&&(p={message:p}),p.duration=p.duration?p.duration:h,p.templateUrl=p.templateUrl?p.templateUrl:i,p.container=p.container?p.container:k,p.classes=p.classes?p.classes:"";var q=p.scope?p.scope.$new():e.$new();if(q.$position=p.position?p.position:j,q.$message=p.message,q.$classes=p.classes,q.$messageTemplate=p.messageTemplate,l>0)for(var r=o.length+1-l,s=0;r>s;s++)o[s].$close();b.get(p.templateUrl,{cache:d}).success(function(b){var d=c(b)(q);if(d.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(a){("opacity"===a.propertyName||0===a.currentTarget.style.opacity||a.originalEvent&&"opacity"===a.originalEvent.propertyName)&&(d.remove(),n.splice(n.indexOf(d),1),o.splice(o.indexOf(q),1),i())}),p.messageTemplate){for(var e,h=0;h<d.children().length;h++)if(angular.element(d.children()[h]).hasClass("cg-notify-message-template")){e=angular.element(d.children()[h]);break}if(!e)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+p.templateUrl+".");e.append(c(p.messageTemplate)(q))}angular.element(p.container).append(d),n.push(d),"center"===q.$position&&a(function(){q.$centerMargin="-"+d[0].offsetWidth/2+"px"}),q.$close=function(){d.css("opacity",0).attr("data-closing","true"),i(),a(function(){d.remove()},m)};var i=function(){for(var a=0,b=f,c=n.length-1;c>=0;c--){var d=10,e=n[c],h=e[0].offsetHeight,i=b+h+d;e.attr("data-closing")?i+=20:b+=h+g,e.css("top",i+"px").css("margin-top","-"+(h+d)+"px").css("visibility","visible"),a++}};a(function(){i()}),p.duration>0&&a(function(){q.$close()},p.duration)}).error(function(a){throw new Error("Template specified for cgNotify ("+p.templateUrl+") could not be loaded. "+a)});var t={};return t.close=function(){q.$close&&q.$close()},Object.defineProperty(t,"message",{get:function(){return q.$message},set:function(a){q.$message=a}}),o.push(q),t};return p.config=function(a){f=angular.isUndefined(a.startTop)?f:a.startTop,g=angular.isUndefined(a.verticalSpacing)?g:a.verticalSpacing,h=angular.isUndefined(a.duration)?h:a.duration,i=a.templateUrl?a.templateUrl:i,j=angular.isUndefined(a.position)?j:a.position,k=a.container?a.container:k,l=a.maximumOpen?a.maximumOpen:l,m=a.opacityAnimationTimeout?a.opacityAnimationTimeout:m},p.closeAll=function(){for(var a=n.length-1;a>=0;a--){var b=n[a];b.css("opacity",0)}},p}]),angular.module("cgNotify").run(["$templateCache",function(a){"use strict";a.put("angular-notify.html","<div class=\"cg-notify-message\" ng-class=\"[$classes, \n    $position === 'center' ? 'cg-notify-message-center' : '',\n    $position === 'left' ? 'cg-notify-message-left' : '',\n    $position === 'right' ? 'cg-notify-message-right' : '']\"\n    ng-style=\"{'margin-left': $centerMargin}\">\n\n    <div ng-show=\"!$messageTemplate\">\n        {{$message}}\n    </div>\n\n"+'    <div ng-show="$messageTemplate" class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')}]);